const ChatApp = require('./module');
let webinarChat =  new ChatApp('webinar');
let facebookChat = new ChatApp('=========facebook');
let vkChat =       new ChatApp('---------vk');

let chatOnMessage = (message) => {
    console.log(message);
};
let prepForAnswer = () => {
    console.log('Prepere for answer');
};
let chatClose = () => {
    console.log('Chat got close :((');
};

webinarChat.on('message', chatOnMessage);
webinarChat.on('message', prepForAnswer);
facebookChat.on('message', chatOnMessage);
vkChat.on('message', chatOnMessage);
vkChat.setMaxListeners(2);
vkChat.on('message', prepForAnswer);
vkChat.on('close', chatClose);




// ??????? ?????????
setTimeout( ()=> {
    console.log('???????? ?????????...');
    vkChat.removeListener('message', chatOnMessage);
}, 10000 );


// ??????? ???????
setTimeout( ()=> {
    console.log('???????? ???????, ??? ???????? — ????????!');
    facebookChat.removeListener('message', chatOnMessage);
}, 15000 );

// ??????? ???????
setTimeout( ()=> {
    console.log('???????? ???????, ??? ???????? — ????????!');
    vkChat.removeListener('message', chatOnMessage);
    vkChat.close();
}, 30000 );



/**
 * Created by HP on 10/12/2016.
 */
